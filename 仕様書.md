ミロのようなノードとエッジで構成されたグラフを作れるアプリを作る。
# 特徴
# 自分でノードのコンポーネントを定義できる。
ノードに入力するプロパティを定義できます。
これにより物語の流れを定義したり、セリフのリストを作ったりできます。
# 作ったグラフの情報をjsonなどで出力できる
例えば物語の大枠の流れをグラフで作った後、それをjsonやcsvで出力することでAIに簡単に食べさせることができます。
# jsonからグラフを構成できる
グラフＡ => json A => json B => グラフB
のようなことができる。


# 操作方法
## ノードの出し方
ノードの作り方ウインドウの作りたい場所で右クリック長押しすると円形にノードの選択ボタンが出るのでドラッグしてそこにカーソルを持って行って離すとノードがおかれる。ブレンダーと同じ
## ノードの消し方
ノードを左クリックすとコンテキストウインドウが出て削除できる。もしくはdelete
## ウインドウの移動と拡縮
スクロールで拡縮されて、配置されてるノード類もすべて位置を保ったまま縮小される。
実装方法は座標系の計算が問題になる。
スクロールするたびに基準からの距離をちじめる。そして基準の位置は自体はくりっくしたところに近づく。
### どのような座標概念があるか？
- class モニター画面座標: クリックしたときに検出される位置。描画基準の位置。
- class 描画基準座標: 配置する図形の位置。
- class 図形内座標: 四角形の中の点の位置
これらは変換関数が定義可能

## UI要素
まず最低限必要なものを列挙すると
- 付箋
    - ４辺と４頂点にハンドルがついていて拡縮できる
    - テキストを書き込める
        - テキストエリアをクリックするとテキスト書き込み可能状態になる
    - 移動できる
        - テキストエリアの余白をつかむことができ、掴むと移動できるようになる。つかめるところにホバーすると色が微妙に変わり、マウスもハンドルマークになる
    - 矢印を召喚するための点が周りに設置されている
        - ホバーすると反応する
- 矢印を出すための点
    - ボタンを押すと矢印が引っ張れるようになり、ドラッグするとボタンからマウス位置まで矢印が引かれる
- 矢印
これだけあればいい
そのうえで、これらは描画範囲の拡縮に合わせてすべて拡縮される。拡縮の仕組みは先に考える必要があるが、UI要素自体は拡縮の仕組みに依存させたくない。

```Mermaid
classDiagram
    class UI要素Interface {

    }
    class 付箋 {
        +move()
        +resize()
        +editText()
    }
    class 辺ハンドル {
        +drag()
        +hoverEffect()
    }
    class 頂点ハンドル {

    }
    class 矢印召喚点 {
        +onHover()
        +onDrag()
    }
    class 矢印 {
        +draw()
        +connect()
    }
    class I移動可能 {
        +move()
    }
    class I拡縮可能 {
        +resize()
    }
    付箋 ..|> UI要素Interface: 実装
    付箋 ..|> I移動可能 : 実装
    付箋 ..|> I拡縮可能 : 実装
    付箋 "1" -- "4" 辺ハンドル : has
    付箋 "n" -- "1" 矢印召喚点 : has
    矢印召喚点 "1" -- "1" 矢印 : 作成
    矢印 "1" -- "1" 付箋 : connects

```

## 描画範囲拡縮の仕組み
描画範囲のUI要素の座標や回転や拡縮などの各種情報の保存の仕方を考えなければならない。
### UIのアフィン情報は３種類のコンセプトがある
- GraohModel型のgraph_model.jsonからグラフを表示するときは、自動で位置が計算される
- グラフを保存するときはGraphViewStandard型のgraph_view.jsonに保存され、これは描画ボードが中心0,拡縮は1の標準状態が適用される。
- 実際に描画されるものは描画ボードの拡縮が適用されたGraphView型オブジェクトが適用される
### 必要なもの一覧
- グラフモデル
- 標準グラフ見た目モデル
- 実際のグラフ見た目モデル
- UI要素をラップできる拡縮要素：描画ボード用にUIを包む物
- UI要素のアフィン情報を位置情報を一時的に保持するもの
- UI要素のアフィン情報を適切に自動計算するもの

### mermaid図
