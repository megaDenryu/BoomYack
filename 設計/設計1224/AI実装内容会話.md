# ユーザー命令
描画キャンバスの配置物の相対位置関係をサーバーに保存し、ロードして再復元できるようにしたいです。データクラスなども作りつつ、実装してください。メソッドチェーン化できるところなどはできるだけそうしてください。

# AI返答
## 実装内容のまとめ

描画キャンバスの配置物データをサーバーに保存・読み込みできるように以下のファイルを作成・更新しました：

### 新規作成ファイル

1. **I描画キャンバス.ts** - シリアライズ用データ型定義
   - `座標データ`, `サイズデータ`, `付箋データ`, `矢印データ`, `折れ線矢印データ` 等の型定義
   - `描画キャンバスデータ` - キャンバス全体のシリアライズ形式
   - ヘルパー関数（`座標データからPx2DVector`, `Px2DVectorから座標データ`）

2. **描画キャンバスState.ts** - 状態管理とシリアライズ
   - `Iシリアライズ可能配置物` インターフェース
   - `描画キャンバスState` クラス - 保存・読み込みロジック
   - シードヘルパー関数群

3. **描画キャンバスAPIリポジトリ.ts** - サーバー通信
   - `描画キャンバスAPIリポジトリ` - サーバーへの保存・読み込み
   - `描画キャンバスローカルリポジトリ` - ローカルストレージへのフォールバック

4. **CanvasRouter.py** - サーバー側APIエンドポイント
   - `/canvas/save` - 保存
   - `/canvas/load` - 読み込み
   - `/canvas/list` - 一覧取得
   - `/canvas/delete` - 削除

5. **index.ts** - モジュールエクスポート

### 更新ファイル

1. **描画キャンバスView.ts** - 保存・読み込み機能追加
   - `保存()`, `ローカル保存()`, `読み込み()`, `ローカル読み込み()` メソッド
   - `toJSON()`, `fromJSON()` メソッド
   - `全配置物クリア()` メソッド

2. **矢印接続可能付箋.ts** - `toシリアライズデータ()` 追加

3. **矢印集約.ts** - `toシリアライズデータ()` 追加

4. **折れ線矢印集約.ts** - `toシリアライズデータ()` 追加

5. **main.py** - `CanvasRouter` のインポートと登録

### 使用例

```typescript
// キャンバス作成（IDを指定）
const canvas = new 描画キャンバスView("my-canvas-id");

// 配置物を追加
canvas.add付箋(Px2DVector.fromNumbers(100, 100));

// サーバーに保存
await canvas.保存();

// サーバーから読み込み（または ローカル読み込み()）
await canvas.読み込み();

// JSONでエクスポート/インポート
const json = canvas.toJSON();
canvas.fromJSON(json);
```

# ユーザーメッセージ 
接続点についてのセーブと復元周りの実装が見当たらないので問題になると思います。実装を検討してください。
それから、現状はセーブとロードを操作できないのでUIも欲しいですね。セーブパネルをフローティングパネルとして描画キャンバスとは完全に独立してUIComponentとして違法行為に気を付けて作ってStickyGraphBoardをエントリーポイントとして実装してください。ブラウザのローカルでセーブするモードとサーバーで保存するモードを選べるようにし、名前を付けられるようにしたいです。そしてセーブパネルはデフォルトは閉じられていて、円状コンテキストメニューから呼び出せるようにしてほしいです。円状コンテキストメニューは今は描画キャンバスView内で生成されていますが、問題になりそうなら、DIするようにしてください。
全体的にエントリーポイントとDIを適切にするように心がけてください。現状はViewを宣言的にするためにDIされてないところも多いですが、適宜必要があればDIに移行してください。


# 
1. 保存と読み込みがタブで切り替えられるようにしようとしてたみたいですが、適切にタブになっていないです。
2. 保存先の２つのボタンはどちらが選択されてるのか全く分からない挙動になってるのを治してください。
3. 保存データ一覧のボタンを押したとき、選択されてるのかされてないのか色が意味不明で分からないです。
このような不満が今のセーブパネルにはあります。
なのでこれらを踏まえて、パネルの仕様はどうあるべきなのか推測したうえで、まともなものにしてください。