# 配置物ユーザーインターフェース仕様書

MiroやFigmaなどの既製品を参考にした、配置物（付箋、矢印等）のユーザーインターフェース機能の整理と実装項目の洗い出し。

## 1. 付箋（Sticky Notes）

### 1.1 基本操作
| 機能 | 説明 | Miro | Figma | 実装優先度 |
|------|------|------|-------|----------|
| **作成** | キャンバス上でクリック/ダブルクリックで新規作成 | ✓ | ✓ | 高 |
| **ドラッグ移動** | マウスドラッグで位置変更 | ✓ | ✓ | 高 |
| **リサイズ** | コーナー/エッジハンドルでサイズ変更 | ✓ | ✓ | 高 |
| **削除** | Delete/Backspaceキーまたは右クリックメニュー | ✓ | ✓ | 高 |
| **複製** | Ctrl+C/Ctrl+V または Alt+ドラッグ | ✓ | ✓ | 中 |

### 1.2 テキスト編集
| 機能 | 説明 | Miro | Figma | 実装優先度 |
|------|------|------|-------|----------|
| **インライン編集** | 付箋をダブルクリックで直接テキスト編集 | ✓ | ✓ | 高 |
| **自動リサイズ** | テキスト量に応じて自動でサイズ調整 | ✓ | ✓ | 中 |
| **改行対応** | Enter/Shift+Enterでの改行 | ✓ | ✓ | 高 |
| **フォーカス管理** | 編集中/非編集中の明確な状態表示 | ✓ | ✓ | 高 |
| **文字数制限** | 適切な文字数制限と警告表示 | △ | △ | 低 |

### 1.3 見た目カスタマイズ
| 機能 | 説明 | Miro | Figma | 実装優先度 |
|------|------|------|-------|----------|
| **色変更** | 背景色の変更（カラーパレット） | ✓ | ✓ | 高 |
| **フォントサイズ** | テキストのフォントサイズ変更 | ✓ | ✓ | 中 |
| **フォント種類** | フォントファミリーの選択 | ✓ | ✓ | 低 |
| **テキスト装飾** | 太字、斜体、下線 | ✓ | ✓ | 中 |
| **テキスト色** | 文字色の変更 | ✓ | ✓ | 中 |
| **影・枠線** | ドロップシャドウ、枠線の設定 | ✓ | ✓ | 低 |

### 1.4 付箋固有機能
| 機能 | 説明 | Miro | Figma | 実装優先度 |
|------|------|------|-------|----------|
| **付箋テンプレート** | 事前定義された付箋スタイル | ✓ | △ | 中 |
| **タグ・ラベル** | 付箋にタグやカテゴリを追加 | ✓ | △ | 中 |
| **チェックリスト** | 付箋内でのタスク管理 | ✓ | × | 低 |
| **投票機能** | 付箋への投票・評価 | ✓ | × | 低 |

## 2. 矢印（Arrows & Connectors）

### 2.1 まっすぐ矢印
| 機能 | 説明 | Miro | Figma | 実装優先度 |
|------|------|------|-------|----------|
| **直線描画** | クリック&ドラッグで直線矢印を描画 | ✓ | ✓ | 高 |
| **始点終点編集** | 矢印の両端を個別に移動可能 | ✓ | ✓ | 高 |
| **矢印の向き** | 矢印の方向（→、←、↔、線のみ） | ✓ | ✓ | 高 |
| **線の太さ** | ストロークの太さ調整 | ✓ | ✓ | 中 |
| **線種** | 実線、破線、点線 | ✓ | ✓ | 中 |

### 2.2 折れ線矢印
| 機能 | 説明 | Miro | Figma | 実装優先度 |
|------|------|------|-------|----------|
| **多点描画** | 複数のポイントを経由する矢印 | ✓ | ✓ | 高 |
| **頂点編集** | 中間ポイントの追加・削除・移動 | ✓ | ✓ | 高 |
| **自動ルーティング** | オブジェクトを避けた最適な経路 | ✓ | ✓ | 中 |
| **直角モード** | 90度折れ曲がりに制限 | ✓ | ✓ | 中 |

### 2.3 なめらか曲線矢印
| 機能 | 説明 | Miro | Figma | 実装優先度 |
|------|------|------|-------|----------|
| **ベジエ曲線** | 滑らかな曲線の描画 | ✓ | ✓ | 中 |
| **制御点編集** | ベジエ曲線の制御ハンドル操作 | ✓ | ✓ | 中 |
| **曲率調整** | 曲線の強さを調整 | ✓ | ✓ | 低 |

### 2.4 矢印共通機能
| 機能 | 説明 | Miro | Figma | 実装優先度 |
|------|------|------|-------|----------|
| **色変更** | 矢印の線色変更 | ✓ | ✓ | 中 |
| **接続機能** | オブジェクトへの自動スナップ | ✓ | ✓ | 高 |
| **ラベル追加** | 矢印上にテキストラベル | ✓ | ✓ | 中 |
| **矢印スタイル** | 矢印の頭の形状（三角、円、四角等） | ✓ | ✓ | 低 |

## 3. グループミニキャンバス

### 3.1 グループ化機能
| 機能 | 説明 | Miro | Figma | 実装優先度 |
|------|------|------|-------|----------|
| **選択グループ化** | 複数オブジェクトをグループ化 | ✓ | ✓ | 高 |
| **グループ解除** | グループの解除 | ✓ | ✓ | 高 |
| **グループ移動** | グループ全体の移動 | ✓ | ✓ | 高 |
| **グループリサイズ** | グループ全体のサイズ変更 | ✓ | ✓ | 中 |
| **ネストグループ** | グループ内にさらにグループを作成 | ✓ | ✓ | 低 |

### 3.2 フレーム機能
| 機能 | 説明 | Miro | Figma | 実装優先度 |
|------|------|------|-------|----------|
| **フレーム作成** | 要素を囲むフレームを作成 | ✓ | ✓ | 中 |
| **フレームタイトル** | フレームにタイトルを設定 | ✓ | ✓ | 中 |
| **背景色設定** | フレームの背景色変更 | ✓ | ✓ | 低 |
| **境界線設定** | フレームの枠線スタイル | ✓ | ✓ | 低 |

## 4. 選択・操作システム

### 4.1 選択機能
| 機能 | 説明 | Miro | Figma | 実装優先度 |
|------|------|------|-------|----------|
| **単一選択** | クリックで単一オブジェクト選択 | ✓ | ✓ | 高 |
| **複数選択** | Ctrl+クリックで追加選択 | ✓ | ✓ | 高 |
| **範囲選択** | ドラッグで矩形範囲選択 | ✓ | ✓ | 高 |
| **全選択** | Ctrl+Aで全オブジェクト選択 | ✓ | ✓ | 中 |
| **選択反転** | 選択状態の反転 | ✓ | ✓ | 低 |

### 4.2 選択状態表示
| 機能 | 説明 | Miro | Figma | 実装優先度 |
|------|------|------|-------|----------|
| **選択境界表示** | 選択されたオブジェクトの境界線 | ✓ | ✓ | 高 |
| **リサイズハンドル** | 8方向のリサイズハンドル表示 | ✓ | ✓ | 高 |
| **回転ハンドル** | 回転操作用のハンドル | ✓ | ✓ | 中 |
| **複数選択表示** | 複数選択時の統合境界表示 | ✓ | ✓ | 中 |

## 5. 右クリックコンテキストメニュー

### 5.1 共通メニュー
| 機能 | 説明 | Miro | Figma | 実装優先度 |
|------|------|------|-------|----------|
| **コピー** | 選択オブジェクトをコピー | ✓ | ✓ | 高 |
| **貼り付け** | コピーしたオブジェクトを貼り付け | ✓ | ✓ | 高 |
| **削除** | 選択オブジェクトを削除 | ✓ | ✓ | 高 |
| **複製** | その場で複製作成 | ✓ | ✓ | 中 |
| **重ね順変更** | 前面/背面への移動 | ✓ | ✓ | 中 |

### 5.2 オブジェクト固有メニュー
| 機能 | 説明 | Miro | Figma | 実装優先度 |
|------|------|------|-------|----------|
| **編集モード** | テキスト編集モードに切り替え | ✓ | ✓ | 高 |
| **スタイル変更** | 色・フォント等のクイック変更 | ✓ | ✓ | 中 |
| **接続点表示** | 矢印の接続ポイント表示 | ✓ | ✓ | 中 |
| **ロック/アンロック** | オブジェクトの編集ロック | ✓ | ✓ | 低 |

## 6. キーボードショートカット

### 6.1 基本操作
| 機能 | ショートカット | Miro | Figma | 実装優先度 |
|------|---------------|------|-------|----------|
| **全選択** | Ctrl + A | ✓ | ✓ | 高 |
| **コピー** | Ctrl + C | ✓ | ✓ | 高 |
| **貼り付け** | Ctrl + V | ✓ | ✓ | 高 |
| **削除** | Delete / Backspace | ✓ | ✓ | 高 |
| **取り消し** | Ctrl + Z | ✓ | ✓ | 高 |
| **やり直し** | Ctrl + Y | ✓ | ✓ | 高 |
| **複製** | Ctrl + D | ✓ | ✓ | 中 |

### 6.2 移動・変形
| 機能 | ショートカット | Miro | Figma | 実装優先度 |
|------|---------------|------|-------|----------|
| **微調整移動** | 矢印キー | ✓ | ✓ | 中 |
| **大幅移動** | Shift + 矢印キー | ✓ | ✓ | 中 |
| **比例リサイズ** | Shift + ドラッグ | ✓ | ✓ | 中 |
| **中心基準リサイズ** | Alt + ドラッグ | ✓ | ✓ | 低 |

## 7. プロパティパネル

### 7.1 位置・サイズ
| 機能 | 説明 | Miro | Figma | 実装優先度 |
|------|------|------|-------|----------|
| **X/Y座標入力** | 数値による正確な位置指定 | ✓ | ✓ | 中 |
| **幅/高さ入力** | 数値による正確なサイズ指定 | ✓ | ✓ | 中 |
| **回転角度入力** | 数値による回転角度指定 | ✓ | ✓ | 低 |
| **制約設定** | アスペクト比固定等の制約 | △ | ✓ | 低 |

### 7.2 外観設定
| 機能 | 説明 | Miro | Figma | 実装優先度 |
|------|------|------|-------|----------|
| **色設定パレット** | 背景色・線色の詳細設定 | ✓ | ✓ | 中 |
| **透明度設定** | オブジェクトの透明度調整 | ✓ | ✓ | 低 |
| **影設定** | ドロップシャドウの詳細設定 | ✓ | ✓ | 低 |
| **枠線設定** | 境界線の詳細設定 | ✓ | ✓ | 中 |

## 8. アニメーション・フィードバック

### 8.1 視覚的フィードバック
| 機能 | 説明 | Miro | Figma | 実装優先度 |
|------|------|------|-------|----------|
| **ホバー効果** | マウスホバー時の見た目変化 | ✓ | ✓ | 中 |
| **選択アニメーション** | 選択時の境界線アニメーション | ✓ | ✓ | 低 |
| **ドラッグフィードバック** | ドラッグ中の視覚的フィードバック | ✓ | ✓ | 中 |
| **スナップガイド** | 配置時のスナップライン表示 | ✓ | ✓ | 中 |

### 8.2 状態表示
| 機能 | 説明 | Miro | Figma | 実装優先度 |
|------|------|------|-------|----------|
| **編集中表示** | テキスト編集中の明確な状態表示 | ✓ | ✓ | 高 |
| **読み取り専用表示** | ロック状態の視覚的表示 | ✓ | ✓ | 低 |
| **エラー状態表示** | 無効な操作時の警告表示 | ✓ | ✓ | 中 |

## 実装優先度の考え方

### 高優先度（MVP必須）
- 基本的な作成・移動・削除・編集機能
- 選択システムとドラッグ操作
- テキスト編集とフォーカス管理
- 矢印の基本描画と接続機能

### 中優先度（ユーザビリティ向上）
- 見た目カスタマイズ機能
- キーボードショートカット
- プロパティパネル
- 視覚的フィードバック

### 低優先度（高度な機能）
- 高度なアニメーション
- 詳細なスタイル設定
- テンプレート機能
- 投票・タグ機能

---

この仕様書を基に、段階的な実装計画を立てることで、ユーザーにとって使いやすい配置物システムを構築できます。