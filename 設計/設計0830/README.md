# 設計ドキュメント索引

## ファイル構成

1. **[01_基底クラス定義.md](01_基底クラス定義.md)**
   - Value Object系（ID型、インターフェース）
   - 基本データ構造（座標点、モデル、VM）
   - 他の層から参照される基盤クラス群

2. **[02_グラフモデル層.md](02_グラフモデル層.md)** 
   - ドメインモデル（グラフモデル、ノードモデル、エッジモデル）
   - モデル間の所有・参照関係
   - ビジネスロジックとデータ永続化の責務

3. **[03_ビューモデル層.md](03_ビューモデル層.md)**
   - 標準グラフVM（正規化座標系での表示データ）
   - 実行時グラフVM（画面座標系での描画データ）
   - ViewModel間の変換関係と表示状態管理

4. **[04_座標変換レイアウト層.md](04_座標変換レイアウト層.md)**
   - アフィン変換（ボード変換、アフィン適用器）
   - レイアウトエンジン（自動配置計算）
   - DOM反映（拡縮ラッパ）とユーザーインタラクション

## データフロー概要

```
グラフモデル → 自動レイアウト → 標準グラフVM → アフィン適用 → 実行時グラフVM → DOM反映
     ↑                                ↑
   編集操作                      ユーザー操作（拡縮・移動）
```

## 層間依存関係

```
04_座標変換レイアウト層
         ↓ depends on
03_ビューモデル層
         ↓ depends on  
02_グラフモデル層
         ↓ depends on
01_基底クラス定義
```

## 責務分離

- **基底クラス層**: 型安全性、同値比較、基本データ構造の定義
- **グラフモデル層**: ビジネスロジック、グラフ構造の管理、データ永続化
- **ビューモデル層**: 表示用データの正規化と変換、表示状態の管理
- **座標変換層**: スケール・位置変換、レイアウト計算、DOM操作

## 設計パターン

- **DDD**: Value Object（ID型）によるドメインモデルの型安全性
- **MVVM**: Model（グラフモデル層）とView（DOM）の分離
- **レイヤードアーキテクチャ**: 関心事の分離と依存方向の制御
- **アフィン変換**: 座標系の抽象化と変換処理の分離

## 使用方法

各層を独立して確認したい場合は、対応するファイルを参照してください。  
全体像を把握したい場合は、元の`mermaid.md`と比較してください。  
クラス間のリンクをクリックすることで、定義元のファイルに移動できます。
